{
    "sourceFile": "models/user.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1697557327108,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1697558034021,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,100 +0,0 @@\n-const mongoose = require(\"mongoose\");\r\n-const { isEmail } = require(\"validator\");\r\n-const bcrypt = require(\"bcrypt\");\r\n-const moment = require(\"moment\");\r\n-\r\n-const userSchema = new mongoose.Schema({\r\n-  email: {\r\n-    type: String,\r\n-    required: [true, \"Please enter an email\"],\r\n-    unique: true,\r\n-    lowercase: true,\r\n-    validate: [isEmail, \"Please enter a valid email\"],\r\n-  },\r\n-  password: {\r\n-    type: String,\r\n-    required: [false, \"Please enter a password\"],\r\n-    minlength: [8, \"Minimum password length is 8 characters\"],\r\n-  },\r\n-  last_name: {\r\n-    type: String,\r\n-    required: true,\r\n-    minlength: [2, \"Last name should have at least 4 characters\"],\r\n-    maxlength: [50, \"Last name should not exceed 50 characters\"],\r\n-  },\r\n-  first_name: {\r\n-    type: String,\r\n-    required: true,\r\n-    minlength: [2, \"Last name should have at least 4 characters\"],\r\n-    maxlength: [50, \"First name should not exceed 50 characters\"],\r\n-  },\r\n-  gender: {\r\n-    type: String,\r\n-    required: false,\r\n-    enum: [\"Male\", \"Female\"],\r\n-  },\r\n-  date_of_birth: {\r\n-    type: Date,\r\n-    required: false,\r\n-    min: [moment().subtract(120, \"years\"), \"You must be at most 120 years old\"],\r\n-    max: [moment().subtract(18, \"years\"), \"You must be at least 18 years old\"],\r\n-  },\r\n-  address: {\r\n-    type: String,\r\n-    required: false,\r\n-    match: [\r\n-      /^[a-zA-Z0-9\\s,'-]*$/,\r\n-      \"Address should only contain letters, numbers, spaces, commas, apostrophes and hyphens\",\r\n-    ],\r\n-  },\r\n-  verified: {\r\n-    type: Boolean,\r\n-    default: false,\r\n-  },\r\n-  id: {\r\n-    type: String,\r\n-    required: false,\r\n-  },\r\n-  token: {\r\n-    type: String,\r\n-    required: false,\r\n-  },\r\n-  phone_number: {\r\n-    type: String,\r\n-    required: false,\r\n-    match: [\r\n-      /^\\+216\\d{8}$|^\\d{8}$/,\r\n-      \"Phone number should be in the format +21622147879 or 22147879\",\r\n-    ],\r\n-  },\r\n-  banned: {\r\n-    type: Boolean,\r\n-  },\r\n-});\r\n-\r\n-// fire a function before doc saved to db\r\n-userSchema.pre(\"save\", async function (next) {\r\n-  const salt = await bcrypt.genSalt();\r\n-  this.password = await bcrypt.hash(this.password, salt);\r\n-\r\n-  next();\r\n-});\r\n-\r\n-// static method to login user\r\n-userSchema.statics.login = async function (email, password) {\r\n-  const user = await this.findOne({ email });\r\n-  if (user) {\r\n-    const auth = await bcrypt.compare(password, user.password);\r\n-    if (auth) {\r\n-      return user;\r\n-    }\r\n-    throw Error(\"incorrect password\");\r\n-  }\r\n-  throw Error(\"incorrect email\");\r\n-};\r\n-\r\n-\r\n-\r\n-const User = mongoose.model(\"User\", userSchema);\r\n-\r\n-module.exports = User;\r\n\\ No newline at end of file\n"
                },
                {
                    "date": 1697558041077,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +0,0 @@\n-\n\\ No newline at end of file\n"
                },
                {
                    "date": 1697564405499,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,100 @@\n-\n+const mongoose = require(\"mongoose\");\r\n+const { isEmail } = require(\"validator\");\r\n+const bcrypt = require(\"bcrypt\");\r\n+const moment = require(\"moment\");\r\n+\r\n+const userSchema = new mongoose.Schema({\r\n+  email: {\r\n+    type: String,\r\n+    required: [true, \"Please enter an email\"],\r\n+    unique: true,\r\n+    lowercase: true,\r\n+    // validate: [isEmail, \"Please enter a valid email\"],\r\n+  },\r\n+  password: {\r\n+    type: String,\r\n+    required: [false, \"Please enter a password\"],\r\n+    minlength: [8, \"Minimum password length is 8 characters\"],\r\n+  },\r\n+  last_name: {\r\n+    type: String,\r\n+    required: true,\r\n+    minlength: [2, \"Last name should have at least 4 characters\"],\r\n+    maxlength: [50, \"Last name should not exceed 50 characters\"],\r\n+  },\r\n+  first_name: {\r\n+    type: String,\r\n+    required: true,\r\n+    minlength: [2, \"Last name should have at least 4 characters\"],\r\n+    maxlength: [50, \"First name should not exceed 50 characters\"],\r\n+  },\r\n+  gender: {\r\n+    type: String,\r\n+    required: false,\r\n+    enum: [\"Male\", \"Female\"],\r\n+  },\r\n+  date_of_birth: {\r\n+    type: Date,\r\n+    required: false,\r\n+    min: [moment().subtract(120, \"years\"), \"You must be at most 120 years old\"],\r\n+    max: [moment().subtract(18, \"years\"), \"You must be at least 18 years old\"],\r\n+  },\r\n+  address: {\r\n+    type: String,\r\n+    required: false,\r\n+    match: [\r\n+      /^[a-zA-Z0-9\\s,'-]*$/,\r\n+      \"Address should only contain letters, numbers, spaces, commas, apostrophes and hyphens\",\r\n+    ],\r\n+  },\r\n+  verified: {\r\n+    type: Boolean,\r\n+    default: false,\r\n+  },\r\n+  id: {\r\n+    type: String,\r\n+    required: false,\r\n+  },\r\n+  token: {\r\n+    type: String,\r\n+    required: false,\r\n+  },\r\n+  phone_number: {\r\n+    type: String,\r\n+    required: false,\r\n+    match: [\r\n+      /^\\+216\\d{8}$|^\\d{8}$/,\r\n+      \"Phone number should be in the format +21622147879 or 22147879\",\r\n+    ],\r\n+  },\r\n+  banned: {\r\n+    type: Boolean,\r\n+  },\r\n+});\r\n+\r\n+// fire a function before doc saved to db\r\n+userSchema.pre(\"save\", async function (next) {\r\n+  const salt = await bcrypt.genSalt();\r\n+  this.password = await bcrypt.hash(this.password, salt);\r\n+\r\n+  next();\r\n+});\r\n+\r\n+// static method to login user\r\n+userSchema.statics.login = async function (email, password) {\r\n+  const user = await this.findOne({ email });\r\n+  if (user) {\r\n+    const auth = await bcrypt.compare(password, user.password);\r\n+    if (auth) {\r\n+      return user;\r\n+    }\r\n+    throw Error(\"incorrect password\");\r\n+  }\r\n+  throw Error(\"incorrect email\");\r\n+};\r\n+\r\n+\r\n+\r\n+const User = mongoose.model(\"User\", userSchema);\r\n+\r\n+module.exports = User;\r\n"
                },
                {
                    "date": 1697564455135,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n   },\r\n   password: {\r\n     type: String,\r\n     required: [false, \"Please enter a password\"],\r\n-    minlength: [8, \"Minimum password length is 8 characters\"],\r\n+    // minlength: [8, \"Minimum password length is 8 characters\"],\r\n   },\r\n   last_name: {\r\n     type: String,\r\n     required: true,\r\n"
                },
                {
                    "date": 1697564461734,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,100 @@\n+const mongoose = require(\"mongoose\");\r\n+const { isEmail } = require(\"validator\");\r\n+const bcrypt = require(\"bcrypt\");\r\n+const moment = require(\"moment\");\r\n+\r\n+const userSchema = new mongoose.Schema({\r\n+  email: {\r\n+    type: String,\r\n+    required: [true, \"Please enter an email\"],\r\n+    unique: true,\r\n+    lowercase: true,\r\n+    // validate: [isEmail, \"Please enter a valid email\"],\r\n+  },\r\n+  password: {\r\n+    type: String,\r\n+    required: [false, \"Please enter a password\"],\r\n+    // minlength: [8, \"Minimum password length is 8 characters\"],\r\n+  },\r\n+  last_name: {\r\n+    type: String,\r\n+    required: true,\r\n+    // minlength: [2, \"Last name should have at least 4 characters\"],\r\n+    // maxlength: [50, \"Last name should not exceed 50 characters\"],\r\n+  },\r\n+  first_name: {\r\n+    type: String,\r\n+    required: true,\r\n+    // minlength: [2, \"Last name should have at least 4 characters\"],\r\n+    maxlength: [50, \"First name should not exceed 50 characters\"],\r\n+  },\r\n+  gender: {\r\n+    type: String,\r\n+    required: false,\r\n+    enum: [\"Male\", \"Female\"],\r\n+  },\r\n+  date_of_birth: {\r\n+    type: Date,\r\n+    required: false,\r\n+    min: [moment().subtract(120, \"years\"), \"You must be at most 120 years old\"],\r\n+    max: [moment().subtract(18, \"years\"), \"You must be at least 18 years old\"],\r\n+  },\r\n+  address: {\r\n+    type: String,\r\n+    required: false,\r\n+    match: [\r\n+      /^[a-zA-Z0-9\\s,'-]*$/,\r\n+      \"Address should only contain letters, numbers, spaces, commas, apostrophes and hyphens\",\r\n+    ],\r\n+  },\r\n+  verified: {\r\n+    type: Boolean,\r\n+    default: false,\r\n+  },\r\n+  id: {\r\n+    type: String,\r\n+    required: false,\r\n+  },\r\n+  token: {\r\n+    type: String,\r\n+    required: false,\r\n+  },\r\n+  phone_number: {\r\n+    type: String,\r\n+    required: false,\r\n+    match: [\r\n+      /^\\+216\\d{8}$|^\\d{8}$/,\r\n+      \"Phone number should be in the format +21622147879 or 22147879\",\r\n+    ],\r\n+  },\r\n+  banned: {\r\n+    type: Boolean,\r\n+  },\r\n+});\r\n+\r\n+// fire a function before doc saved to db\r\n+userSchema.pre(\"save\", async function (next) {\r\n+  const salt = await bcrypt.genSalt();\r\n+  this.password = await bcrypt.hash(this.password, salt);\r\n+\r\n+  next();\r\n+});\r\n+\r\n+// static method to login user\r\n+userSchema.statics.login = async function (email, password) {\r\n+  const user = await this.findOne({ email });\r\n+  if (user) {\r\n+    const auth = await bcrypt.compare(password, user.password);\r\n+    if (auth) {\r\n+      return user;\r\n+    }\r\n+    throw Error(\"incorrect password\");\r\n+  }\r\n+  throw Error(\"incorrect email\");\r\n+};\r\n+\r\n+\r\n+\r\n+const User = mongoose.model(\"User\", userSchema);\r\n+\r\n+module.exports = User;\r\n"
                },
                {
                    "date": 1697564658864,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,172 +1,47 @@\n const mongoose = require(\"mongoose\");\r\n-const { isEmail } = require(\"validator\");\r\n const bcrypt = require(\"bcrypt\");\r\n const moment = require(\"moment\");\r\n \r\n const userSchema = new mongoose.Schema({\r\n   email: {\r\n     type: String,\r\n-    required: [true, \"Please enter an email\"],\r\n-    unique: true,\r\n-    lowercase: true,\r\n-    // validate: [isEmail, \"Please enter a valid email\"],\r\n-  },\r\n-  password: {\r\n-    type: String,\r\n-    required: [false, \"Please enter a password\"],\r\n-    // minlength: [8, \"Minimum password length is 8 characters\"],\r\n-  },\r\n-  last_name: {\r\n-    type: String,\r\n     required: true,\r\n-    // minlength: [2, \"Last name should have at least 4 characters\"],\r\n-    // maxlength: [50, \"Last name should not exceed 50 characters\"],\r\n-  },\r\n-  first_name: {\r\n-    type: String,\r\n-    required: true,\r\n-    // minlength: [2, \"Last name should have at least 4 characters\"],\r\n-    maxlength: [50, \"First name should not exceed 50 characters\"],\r\n-  },\r\n-  gender: {\r\n-    type: String,\r\n-    required: false,\r\n-    enum: [\"Male\", \"Female\"],\r\n-  },\r\n-  date_of_birth: {\r\n-    type: Date,\r\n-    required: false,\r\n-    min: [moment().subtract(120, \"years\"), \"You must be at most 120 years old\"],\r\n-    max: [moment().subtract(18, \"years\"), \"You must be at least 18 years old\"],\r\n-  },\r\n-  address: {\r\n-    type: String,\r\n-    required: false,\r\n-    match: [\r\n-      /^[a-zA-Z0-9\\s,'-]*$/,\r\n-      \"Address should only contain letters, numbers, spaces, commas, apostrophes and hyphens\",\r\n-    ],\r\n-  },\r\n-  verified: {\r\n-    type: Boolean,\r\n-    default: false,\r\n-  },\r\n-  id: {\r\n-    type: String,\r\n-    required: false,\r\n-  },\r\n-  token: {\r\n-    type: String,\r\n-    required: false,\r\n-  },\r\n-  phone_number: {\r\n-    type: String,\r\n-    required: false,\r\n-    match: [\r\n-      /^\\+216\\d{8}$|^\\d{8}$/,\r\n-      \"Phone number should be in the format +21622147879 or 22147879\",\r\n-    ],\r\n-  },\r\n-  banned: {\r\n-    type: Boolean,\r\n-  },\r\n-});\r\n-\r\n-// fire a function before doc saved to db\r\n-userSchema.pre(\"save\", async function (next) {\r\n-  const salt = await bcrypt.genSalt();\r\n-  this.password = await bcrypt.hash(this.password, salt);\r\n-\r\n-  next();\r\n-});\r\n-\r\n-// static method to login user\r\n-userSchema.statics.login = async function (email, password) {\r\n-  const user = await this.findOne({ email });\r\n-  if (user) {\r\n-    const auth = await bcrypt.compare(password, user.password);\r\n-    if (auth) {\r\n-      return user;\r\n-    }\r\n-    throw Error(\"incorrect password\");\r\n-  }\r\n-  throw Error(\"incorrect email\");\r\n-};\r\n-\r\n-\r\n-\r\n-const User = mongoose.model(\"User\", userSchema);\r\n-\r\n-module.exports = User;\r\n-const mongoose = require(\"mongoose\");\r\n-const { isEmail } = require(\"validator\");\r\n-const bcrypt = require(\"bcrypt\");\r\n-const moment = require(\"moment\");\r\n-\r\n-const userSchema = new mongoose.Schema({\r\n-  email: {\r\n-    type: String,\r\n-    required: [true, \"Please enter an email\"],\r\n     unique: true,\r\n     lowercase: true,\r\n-    // validate: [isEmail, \"Please enter a valid email\"],\r\n   },\r\n   password: {\r\n     type: String,\r\n-    required: [false, \"Please enter a password\"],\r\n-    // minlength: [8, \"Minimum password length is 8 characters\"],\r\n   },\r\n   last_name: {\r\n     type: String,\r\n     required: true,\r\n-    minlength: [2, \"Last name should have at least 4 characters\"],\r\n-    maxlength: [50, \"Last name should not exceed 50 characters\"],\r\n   },\r\n   first_name: {\r\n     type: String,\r\n     required: true,\r\n-    minlength: [2, \"Last name should have at least 4 characters\"],\r\n-    maxlength: [50, \"First name should not exceed 50 characters\"],\r\n   },\r\n   gender: {\r\n     type: String,\r\n-    required: false,\r\n-    enum: [\"Male\", \"Female\"],\r\n   },\r\n   date_of_birth: {\r\n     type: Date,\r\n-    required: false,\r\n-    min: [moment().subtract(120, \"years\"), \"You must be at most 120 years old\"],\r\n-    max: [moment().subtract(18, \"years\"), \"You must be at least 18 years old\"],\r\n   },\r\n   address: {\r\n     type: String,\r\n-    required: false,\r\n-    match: [\r\n-      /^[a-zA-Z0-9\\s,'-]*$/,\r\n-      \"Address should only contain letters, numbers, spaces, commas, apostrophes and hyphens\",\r\n-    ],\r\n   },\r\n   verified: {\r\n     type: Boolean,\r\n     default: false,\r\n   },\r\n   id: {\r\n     type: String,\r\n-    required: false,\r\n   },\r\n   token: {\r\n     type: String,\r\n-    required: false,\r\n   },\r\n   phone_number: {\r\n     type: String,\r\n-    required: false,\r\n-    match: [\r\n-      /^\\+216\\d{8}$|^\\d{8}$/,\r\n-      \"Phone number should be in the format +21622147879 or 22147879\",\r\n-    ],\r\n   },\r\n   banned: {\r\n     type: Boolean,\r\n   },\r\n@@ -192,9 +67,7 @@\n   }\r\n   throw Error(\"incorrect email\");\r\n };\r\n \r\n-\r\n-\r\n const User = mongoose.model(\"User\", userSchema);\r\n \r\n module.exports = User;\r\n"
                },
                {
                    "date": 1697564873269,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,70 @@\n+const mongoose = require(\"mongoose\");\r\n+const bcrypt = require(\"bcrypt\");\r\n+const moment = require(\"moment\");\r\n+\r\n+const userSchema = new mongoose.Schema({\r\n+  email: {\r\n+    type: String,\r\n+    required: true,\r\n+    unique: true,\r\n+    lowercase: true,\r\n+  },\r\n+  password: {\r\n+    type: String,\r\n+  },\r\n+  last_name: {\r\n+    type: String,\r\n+    required: true,\r\n+  },\r\n+  first_name: {\r\n+    type: String,\r\n+    required: true,\r\n+  },\r\n+  gender: {\r\n+    type: String,\r\n+  },\r\n+  date_of_birth: {\r\n+    type: Date,\r\n+  },\r\n+  address: {\r\n+    type: String,\r\n+  },\r\n+\r\n+  id: {\r\n+    type: String,\r\n+  },\r\n+  token: {\r\n+    type: String,\r\n+  },\r\n+  phone_number: {\r\n+    type: String,\r\n+  },\r\n+  banned: {\r\n+    type: Boolean,\r\n+  },\r\n+});\r\n+\r\n+// fire a function before doc saved to db\r\n+userSchema.pre(\"save\", async function (next) {\r\n+  const salt = await bcrypt.genSalt();\r\n+  this.password = await bcrypt.hash(this.password, salt);\r\n+\r\n+  next();\r\n+});\r\n+\r\n+// static method to login user\r\n+userSchema.statics.login = async function (email, password) {\r\n+  const user = await this.findOne({ email });\r\n+  if (user) {\r\n+    const auth = await bcrypt.compare(password, user.password);\r\n+    if (auth) {\r\n+      return user;\r\n+    }\r\n+    throw Error(\"incorrect password\");\r\n+  }\r\n+  throw Error(\"incorrect email\");\r\n+};\r\n+\r\n+const User = mongoose.model(\"User\", userSchema);\r\n+\r\n+module.exports = User;\r\n"
                }
            ],
            "date": 1697557327108,
            "name": "Commit-0",
            "content": "const mongoose = require(\"mongoose\");\r\nconst { isEmail } = require(\"validator\");\r\nconst bcrypt = require(\"bcrypt\");\r\nconst moment = require(\"moment\");\r\n\r\nconst userSchema = new mongoose.Schema({\r\n  email: {\r\n    type: String,\r\n    required: [true, \"Please enter an email\"],\r\n    unique: true,\r\n    lowercase: true,\r\n    validate: [isEmail, \"Please enter a valid email\"],\r\n  },\r\n  password: {\r\n    type: String,\r\n    required: [false, \"Please enter a password\"],\r\n    minlength: [8, \"Minimum password length is 8 characters\"],\r\n  },\r\n  last_name: {\r\n    type: String,\r\n    required: true,\r\n    minlength: [2, \"Last name should have at least 4 characters\"],\r\n    maxlength: [50, \"Last name should not exceed 50 characters\"],\r\n  },\r\n  first_name: {\r\n    type: String,\r\n    required: true,\r\n    minlength: [2, \"Last name should have at least 4 characters\"],\r\n    maxlength: [50, \"First name should not exceed 50 characters\"],\r\n  },\r\n  gender: {\r\n    type: String,\r\n    required: false,\r\n    enum: [\"Male\", \"Female\"],\r\n  },\r\n  date_of_birth: {\r\n    type: Date,\r\n    required: false,\r\n    min: [moment().subtract(120, \"years\"), \"You must be at most 120 years old\"],\r\n    max: [moment().subtract(18, \"years\"), \"You must be at least 18 years old\"],\r\n  },\r\n  address: {\r\n    type: String,\r\n    required: false,\r\n    match: [\r\n      /^[a-zA-Z0-9\\s,'-]*$/,\r\n      \"Address should only contain letters, numbers, spaces, commas, apostrophes and hyphens\",\r\n    ],\r\n  },\r\n  verified: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  id: {\r\n    type: String,\r\n    required: false,\r\n  },\r\n  token: {\r\n    type: String,\r\n    required: false,\r\n  },\r\n  phone_number: {\r\n    type: String,\r\n    required: false,\r\n    match: [\r\n      /^\\+216\\d{8}$|^\\d{8}$/,\r\n      \"Phone number should be in the format +21622147879 or 22147879\",\r\n    ],\r\n  },\r\n  banned: {\r\n    type: Boolean,\r\n  },\r\n});\r\n\r\n// fire a function before doc saved to db\r\nuserSchema.pre(\"save\", async function (next) {\r\n  const salt = await bcrypt.genSalt();\r\n  this.password = await bcrypt.hash(this.password, salt);\r\n\r\n  next();\r\n});\r\n\r\n// static method to login user\r\nuserSchema.statics.login = async function (email, password) {\r\n  const user = await this.findOne({ email });\r\n  if (user) {\r\n    const auth = await bcrypt.compare(password, user.password);\r\n    if (auth) {\r\n      return user;\r\n    }\r\n    throw Error(\"incorrect password\");\r\n  }\r\n  throw Error(\"incorrect email\");\r\n};\r\n\r\n\r\n\r\nconst User = mongoose.model(\"User\", userSchema);\r\n\r\nmodule.exports = User;\r\n"
        }
    ]
}